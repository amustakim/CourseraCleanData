#CodeBook 
**<run_analysis.R  :  _TidyData.txt_**

	Student: Ahmed Mustakim      
	Course: Getting and Cleaning Data               
	Date: July 19, 2014  
> This code book describes the `variables or column names` from 
the original [Human Activity Recognition Using Smartphones Dataset](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones) and any `transformations` performed to clean up that data resulting in a `tidy data set`. Please also refer to the **README.md** file.

##How to decode variables or column names 
As described in the experiment, 30 volunteers or **subjects** within 19 to 48 years old of age, each wore a Samsung Galaxy S II smartphone on their waist and performed six discreet **activities** (`walking`, `walking upstairs`, `walking downstairs`, `sitting`, `standing` and `laying`) as built-in sensors in their smart phones collected data on their activities.  The tidy data set (**"TidyData.txt" file**) contains 85,860 observations and 4 variables or columns:

1. The **SubjectID** identifies the 30 subjects who participated in this experiment (split between test and training subjects).
2. The **ActivityID** identifies the 6 discreet activities performed by the subjects during the experiment
3. The **VariableName** is simply a conjunction of ***signal codes*** generated by the accelerometers and gyroscopes embedded within the smartphones and further ***calculations or measurements*** performed on those signals. These are explained in details below.
4. And finally, the **Mean** simply indicates the average of each variable, for each activity performed by each subject. 

###Signal Codes
There are 17 raw signals codes and they can be categorized and decoded using the following information:    

>**t** denotes time, **f** denotes frequency domain signals (Hz) and 3-Axial signals are denoted in **X**, **Y** and **Z** coordinates. In essence each new coordinate can mean a new variable, even if the signal is the same: for instance tBodyAcc-mean()-X and tBodyAcc-mean()-Y are 2 different variables.

**Main Signals**
 	
	1. tGyro (Angular Velocity from gyroscope)  
	2. tAcc (Linear Acceleration accelerometer)

**Components Linear Acceleration**

	3. tGravityAcc (Gravitation Acceleration)
	4. tBodyAcc (Body Acceleration)

**Jerk Signals**

	5. tBodyAccJerk (Body Acceleration Jerk)
	6. tBodyGyroJerk (Angular Velocity Jerk)

**Magnitude (Euclidean norm)**

	7. tBodyAccMag (Body Acceleration Magnitude)
	8. tGravityAccMag (Gravity Acceleration Magnitude)
	9. tBodyAccJerkMag (Body Acceleration Jerk Magnitude)
	10. tBodyGyroMag (Body Angular Velocity Magnitude)
	11. tBodyGyroJerkMag  (Body Angular Velocity Jerk Magnitude) 

**FFT (Fast Fourier Transform)**

	12. fBodyAcc (Body Acceleration)
	13. fBodyAccJerk (Body Acceleration Jerk)
	14. fBodyGyro (Body Angular Velocity)
	15. fBodyAccJerkMag (Body Acceleration Jerk Magnitude)
	16. fBodyGyroMag (Body Angular Velocity Magnitude)
	17. fBodyGyroJerkMag (Body Angular Velocity Jerk Magnitude)

**Additional Derived Signal Codes:**
There are signal codes which are derived from other calculations and those are indicated below, under *"Calculations and measurements"*.

###Calculation or measurements
The signal codes are used for these further calculations or measurements: 

1. **mean()**: Mean value
2. **std()**: Standard deviation
3. **mad()**: Median absolute deviation 
4. **max()**: Largest value in array
5. **min()**: Smallest value in array
6. **sma()**: Signal magnitude area
7. **energy()**: Energy measure. Sum of the squares divided by the number of values. 
8. **iqr()**: Interquartile range 
9. **entropy()**: Signal entropy
10. **arCoeff()**: Autorregresion coefficients with Burg order equal to 4
11. **correlation()**: correlation coefficient between two signals
12. **maxInds()**: index of the frequency component with largest magnitude
13. **meanFreq()**: Weighted average of the frequency components to obtain a mean frequency
14. **skewness()**: skewness of the frequency domain signal 
15. **kurtosis()**: kurtosis of the frequency domain signal 
16. **bandsEnergy()**: Energy of a frequency interval within the 64 bins of the FFT (Fast Frontier Transform) of each window.
17. **angle()**: Angle between two vectors. 

On this last **angle** variable, additional vectors were obtained by averaging the signals in a signal window sample:

	1. gravityMean (Mean of Gravity)
	2. tBodyAccMean (Mean of Body Acceleration)
	3. tBodyAccJerkMean (Mean of Body Acceleration Jerk)
	4. tBodyGyroMean (Mean of Body Angular Velocity)
	5. tBodyGyroJerkMean (Mean of Body Angular Velocity Jerk)


##Transformation Steps

######Assignment 1
1. Download and extract the [zip](https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip) file into main working directory. Override it, if it already exists. If Windows still prompts you, click "YestoAll" to replace the existing unzipped files.
2. Ignore the Inertial folders
3. Get all the training and test data sets into temporary tables 
4. Merge the individual sub tables using **rbind**:
	- X_train with X_test (i.e. Main Data Table)
	- Y_train with Y_test (i.e. Activity Table)
	- Subj_Train with Subj_Test (Subject Table)
3.  Subject Table has only 1 column. Label it `"SubjectID"`
4.  Activity Table has only 1 column. Label it `"ActivityID"`
5.  Merge all 3 sub-tables into 1 table

######Assignment 2
1. Convert the merged table into a `data.table` and set 2 main keys (`"SubjectID"` and `"ActivityID"`) which are distinctive from the rest of the data set.
2.  Capture the names of the main data variables from `features.txt` file
3.  Get the `mean` and `std` (i.e. standard deviation) column names using **grep**
4.  Create a set of column names that mimic the main data variables, for which we need to subset into:  	

    	tBodyAcc-mean()-X 	"V1"
		tBodyAcc-mean()-X	"V2"
		...
5.  Create column index names based on this look up
6.  Then subset into those columns. The result is a smaller subset data set with just 66 variables including `"SubjectID"`, `"ActivityID"` and mean and standard deviation specific variables only. 

######Assignment 3
1. Create a vector for the 6 activity labels:   
	
		c("Walking","Walking Upstairs","Walking Downstairs","Sitting","Standing","Laying")
2.  Convert the data type in `"ActivityID"` columns to a factor

######Assignment 4
1. Change the main variable names within the merged data set and the mean and standard deviations data set using the variable names extracted from the `features.txt` file earlier.
2. Save the  mean and standard deviations data as a tab-delimited file:
>MeanAndStdDevData.txt

######Assignment 5
1. `Melt` the merged data set so that each variable for each activity and each subject lines up vertically into the structure of the  **TidyData.txt** file.
2. Calculate the mean for each variable, activity and subject using `ddply` and capture the output in  a table
3. Rename the the 4th column of this table to `"Mean"` 
4. Save the result in a tab-delimited file:
>TidyData.txt

##Tidy Data Set

The **TidyData.txt** file  contains 85,860 observations and 4 variables. It  indicates the average of each variable, for each activity performed by each subject. 

It is a result of executing the **run_analysis.R** code.